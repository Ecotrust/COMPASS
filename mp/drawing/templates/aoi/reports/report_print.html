{% load static %}
<HTML>
  <head>
    <link href="{% static 'assets/jquery/jquery.js' %}" rel="stylesheet">
    <link href="{% static 'assets/bootstrap/bootstrap.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'assets/leaflet/leaflet.css' %}">
    <link href="{% static 'compass/css/strategy_report.css' %}" rel="stylesheet">
    <link href="{% static 'compass/css/print_report.css' %}" rel="stylesheet">

    <script src="{% static 'assets/leaflet/leaflet.js' %}"></script>
  </head>
  <body>
    <div class='container'>
      <h1>{{ title }}</h1>
      {% if description %}
        <h3>{{ description }}</h3>
      {% endif %}
      <p>{{ timestamp }}</p>
      {% if map %}
        <div class="row">
          <div class="span1 left-buffer"></div>
          <div class="span5">
            <div id="topomapid" class="leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0"></div>
            <div id="topo-attribution">
              <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Sources: <a href="https://www.esri.com">ESRI</a>, HERE, Garmin, Intermap, increment P Corp., GEBCO, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), Â© OpenStreetMap contributors, and the GIS User Community
            </div>
          </div>
          <div class="span5">
            <div id="satmapid" class="leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0"></div>
            <div id="sat-attribution">
              <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Sources: <a href="https://www.esri.com">ESRI</a>, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and others
            </div>
          </div>
        </div>
        <script>

          var topomap = L.map('topomapid').setView([44, -120.7], 6);
          var satmap = L.map('satmapid').setView([44, -120.7], 6);

          L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
            maxZoom: 18,
            attribution: 'Sources: <a href="https://www.esri.com">ESRI</a>, HERE, Garmin, ' +
              'Intermap, increment P Corp., GEBCO, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, ' +
              'Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), &copy; OpenStreetMap contributors, ' +
              'and the GIS User Community',
            id: 'esri.topo'
          }).addTo(topomap);

          L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            maxZoom: 18,
            attribution: 'Sources: <a href="https://www.esri.com">ESRI</a>, i-cubed, USDA, USGS, AEX, GeoEye, ' +
              'Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and others',
            id: 'esri.aerial'
          }).addTo(satmap);


        // Get GeoJSON and add layer
        var geojsonFeature = {{ map|safe }};
        var topoFeatureLayer = L.geoJSON(geojsonFeature);
        topoFeatureLayer.addTo(topomap);
        var satFeatureLayer = L.geoJSON(geojsonFeature);
        satFeatureLayer.addTo(satmap);

        // Zoom mapa to geojson feature
        topomap.fitBounds(topoFeatureLayer.getBounds());
        satmap.fitBounds(satFeatureLayer.getBounds());

        </script>
      {% endif %}
      <div class="row">
        <div class="span1 left-buffer"></div>
          <div id="report-div" class="span10">
            {% include 'aoi/reports/report.html' %}
          </div>
        </div>
      </div>
    </div>
  </body>
</HTML>
