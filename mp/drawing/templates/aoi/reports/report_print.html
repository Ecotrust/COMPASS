{% load static %}
<HTML>
  <head>
    <link href="{% static 'assets/bootstrap/bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'assets/leaflet/leaflet.css' %}" rel="stylesheet">
    <link href="{% static 'compass/css/strategy_report.css' %}" rel="stylesheet">
    <link href="{% static 'compass/css/print_report.css' %}" rel="stylesheet">

    <script src="{% static 'assets/jquery/jquery.js' %}"></script>
    <script src="{% static 'assets/leaflet/leaflet.js' %}"></script>
  </head>
  <body>
    <div class='container'>
      <svg id="report-header-svg">
        <rect id="report-header-svg-rect" />
        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="sans-serif" font-size="39px" fill="white">Compass Conservation Strategy Report</text>
      </svg>
      <div id="head-space"></div>
      <h1>{{ title }}</h1>
      {% if description %}
        <h3>{{ description }}</h3>
      {% endif %}
      <p>{{ timestamp }}</p>
      {% if map %}
        <div class="row">
          <div class="span1 left-buffer"></div>
          <div class="span5">
            <div id="topomapid" class="leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0"></div>
            <div id="topo-attribution">
              <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Sources: <a href="https://www.esri.com">ESRI</a>, HERE, Garmin, Intermap, increment P Corp., GEBCO, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), Â© OpenStreetMap contributors, and the GIS User Community
            </div>
          </div>
          <div class="span5">
            <div id="satmapid" class="leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0"></div>
            <div id="sat-attribution">
              <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Sources: <a href="https://www.esri.com">ESRI</a>, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and others
            </div>
          </div>
        </div>
        <script>

          var topomap = L.map('topomapid').setView([44, -120.7], 6);
          var satmap = L.map('satmapid').setView([44, -120.7], 6);

          L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
            maxZoom: 18,
            attribution: 'Sources: <a href="https://www.esri.com">ESRI</a>, HERE, Garmin, ' +
              'Intermap, increment P Corp., GEBCO, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, ' +
              'Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), &copy; OpenStreetMap contributors, ' +
              'and the GIS User Community',
            id: 'esri.topo'
          }).addTo(topomap);

          L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            maxZoom: 18,
            attribution: 'Sources: <a href="https://www.esri.com">ESRI</a>, i-cubed, USDA, USGS, AEX, GeoEye, ' +
              'Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and others',
            id: 'esri.aerial'
          }).addTo(satmap);


        // Get GeoJSON and add layer
        var geojsonFeature = {{ map|safe }};
        var topoFeatureLayer = L.geoJSON(geojsonFeature);
        topoFeatureLayer.addTo(topomap);
        var satFeatureLayer = L.geoJSON(geojsonFeature);
        satFeatureLayer.addTo(satmap);

        // Zoom mapa to geojson feature
        topomap.fitBounds(topoFeatureLayer.getBounds());
        satmap.fitBounds(satFeatureLayer.getBounds());

        </script>
      {% endif %}
      <div class="row">
        <div class="span1 left-buffer"></div>
          <div id="report-div" class="span10">
            {% include 'aoi/reports/report.html' %}
          </div>
        </div>
        <div id="foot-space"></div>
        <svg id="report-footer-svg">
          <rect id="report-footer-svg-rect"></rect>
        </svg>
        <div id="data-panel-footer">
          <div id="data-panel-footer-images"  class="row footer">
            <!-- <div class="row"> -->
              <div class="span4">
                <a href="http://www.dfw.state.or.us/maps/compass/" target="_blank">
                  <img src="{% static 'compass/img/Compass_BW.png' %}">
                </a>
              </div>
              <div class="span4">
                <a href="http://dfw.state.or.us/" target="_blank">
                  <img src="{% static 'compass/img/ODFW_BW.png' %}">
                </a>
              </div>
              <div class="span4">
                <a href="https://oregonconservationstrategy.com" target="_blank">
                  <img src="{% static 'compass/img/OCSLogo.png' %}">
                </a>
              </div>
            </div>
            <div class="row">
              <div class="span4 report-footer-links">
                <a href="https://compass.dfw.state.or.us" class="report-footer-link" target="_blank">compass.dfw.state.or.us</a>
              </div>
              <div class="span4 report-footer-links">
                <a href="https://www.dfw.state.or.us" class="report-footer-link" target="_blank">www.dfw.state.or.us</a>
              </div>
              <div class="span4 report-footer-links">
                <a href="https://oregonconservationstrategy.org" class="report-footer-link" target="_blank">oregonconservationstrategy.org</a>
              </div>
            </div>

        </div>
      </div>
    </div>
  </body>
</HTML>
